<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE TEI.2 SYSTEM "tei_bawe.dtd"><TEI.2 id="_0356a" n="version 1.0"><teiHeader><fileDesc><titleStmt><title>Mitsubishi M16C microcontroller LEDs-Modulo 100</title></titleStmt><extent/><publicationStmt><distributor>British Academic Written English (BAWE) corpus</distributor><availability><p>The British Academic Written English (BAWE) corpus was developed at the Universities of Warwick, Reading and Oxford Brookes, under the directorship of Hilary Nesi and Sheena Gardner (formerly of the Centre for Applied Linguistics [previously called CELTE], Warwick), Paul Thompson (Department of Applied Linguistics, Reading) and Paul Wickens (Westminster Institute of Education, Oxford Brookes), with funding from the ESRC. Subject to the rights of the these institutions in the BAWE corpus, and pursuant to the ESRC agreement, the BAWE corpus is available to researchers for research purposes PROVIDED THAT the following conditions are met:</p><p>1. The corpus files are not distributed in either their original form or in modified form.</p><p>2. The texts are used for research purposes only; they should not be reproduced in teaching materials.</p><p>3. The texts are not reproduced in full for a wider audience/readership, although researchers are free to quote short passages of text (up to 200 running words from any given text).</p><p>4. The BAWE corpus developers (contact: Hilary Nesi) are informed of all projects, dissertations, theses, presentations or publications arising from analysis of the corpus.</p><p>5. Researchers acknowledge their use of the corpus using the following form of words: "The data in this study come from the British Academic Written English (BAWE) corpus, which was developed at the Universities of Warwick, Reading and Oxford Brookes under the directorship of Hilary Nesi and Sheena Gardner (formerly of the Centre for Applied Linguistics [previously called CELTE], Warwick), Paul Thompson (Department of Applied Linguistics, Reading) and Paul Wickens (Westminster Institute of Education, Oxford Brookes), with funding from the ESRC (RES-000-23-0800)."</p></availability></publicationStmt><notesStmt><note resp="British Academic Written English (BAWE) corpus project">The document has a title page which contains:
document title
title part</note><note resp="British Academic Written English (BAWE) corpus project">Language used in quote: <foreign id="English">English</foreign></note><note resp="British Academic Written English (BAWE) corpus project">deleted: header: student name and number; foooter: page numbers</note></notesStmt><sourceDesc><p n="level">2</p><p n="date">2007-02</p><p n="module title">Computer Systems</p><p n="module code">ES2A2</p><p n="genre family">Methodology recount</p><p n="discipline">Engineering</p><p n="disciplinary group">PS</p><p n="grade">D</p><p n="number of authors">1</p><p n="number of words">1152</p><p n="number of s-units">32</p><p n="number of p">17</p><p n="number of tables">1</p><p n="number of figures">1</p><p n="number of block quotes">1</p><p n="number of formulae">0</p><p n="number of lists">1</p><p n="number of paragraphs formatted like lists">0</p><p n="abstract present">no abstract</p><p n="average words per s-unit">36.0</p><p n="average s-units per p">1.9</p><p n="macrotype of assignment">simple assignment</p></sourceDesc></fileDesc><encodingDesc><p>TEI P4 (documented in: BAWE.documentation.pdf)</p></encodingDesc><profileDesc><particDesc><person><p n="gender">m</p><p n="year of birth">1986</p><p n="first language">Sinhala</p><p n="education">OSA</p><p n="course">Engineering Business Management</p><p n="student ID">0356</p></person></particDesc></profileDesc></teiHeader><text><front><titlePage><titlePart rend="bold">ES2A2 COMPUTER SYSTEMS</titlePart><docTitle><titlePart>Mitsubishi M16C microcontroller LEDs-Modulo 100</titlePart></docTitle><titlePart>By<name type="student name"/><name type="student ID"/></titlePart><titlePart>Lab performed- [15/02/2007] Report due- [23/02/2007]</titlePart></titlePage><div1 type="toc" n="2"><head>Table of Contents</head><p/></div1></front><body><div1 type="section"><head rend="bold">Introduction</head><p n="p1.17"><s n="s1.3;p1.17">The experiment was carried out using a Mitsubishi M16 microcontroller and IER Embedded Workbench. </s><s n="s2.3;p1.17">The given incomplete code which was written in C was completed, then debugged using C-Spy and executed via the hardware. </s><s n="s3.3;p1.17">This procedure was used to control two 7-segmant LED displays to display a count when SW1 and SW2 (switch 1 &amp; 2) are pressed. </s></p><p n="p2.17"><s n="s1.1;p2.17">First part was to complete the incomplete code to display an increasing count when SW1 is pressed where the 'tens' are displayed on LED 1 and 'units' are displayed on LED 2. </s></p><p n="p3.17"><s n="s1.1;p3.17">The second part of the lab was to add a new section to the completed code to decrease the count when SW 2 was pressed. </s></p></div1><div1 type="section"><head rend="bold">Procedure </head><p n="p4.17"><s n="s1.2;p4.17">First the IER Embedded Workbench is opened and a new project is opened. </s><s n="s2.2;p4.17">This program supports the Mitsubishi M16 microprocessor. </s></p><p n="p5.17"><s n="s1.4;p5.17">Then the created project is set to default factory settings after choosing ICCM16C and X-Link in the project options. </s><s n="s2.4;p5.17">The program C-Spy was chosen as the debugger. </s><s n="s3.4;p5.17">Then in the project files the incomplete C code, .xcl file and .s34 file was selected. </s><s n="s4.4;p5.17">Then the incomplete C code was opened and the missing codes were entered to display a count (Modulo 100) in the LED displays ('tens' are displayed on LED 1 and 'units' are displayed on LED 2) when SW 1 was pressed. </s></p><p n="p6.17"><s n="s1.3;p6.17">The M16C development board was then connected to the power supply and the PC via the serial link. </s><s n="s2.3;p6.17">Then the circuit board was switched on and .s34 and .xcl files were added to the project. </s><s n="s3.3;p6.17">The C-Spy was run as the debugger and the program was executed in the ROM monitor mode via the M16 development board. </s></p><p n="p7.17"><s n="s1.2;p7.17">Then a count was carried out in the microcontroller (modulo 100) when SW 1 was pressed. </s><s n="s2.2;p7.17">This count was displayed on the LED displays. </s></p><p n="p8.17"><s n="s1.3;p8.17">Then the continuous step function was aborted and the code was modified to reduce the count when SW 2 was pressed. </s><s n="s2.3;p8.17">The C-Spy was then run as the debugger and program was executed in the ROM monitor mode via the M16 development board. </s><s n="s3.3;p8.17">Then this function was displayed on the LED displays. </s></p><div2><head rend="bold">Problems encountered in Completing the missing codes in the C program Code and steps taken:</head><p n="p9.17"><s n="s1.1;p9.17">When the code was opened in the project window, some of the main syntax at the very beginning of the code was in a different format and had to be changed. </s></p><p n="p10.17"><s n="s1.2;p10.17">When the 'PD' terminals were defined in the main body of the program it was defined as "PD = 0x0FF", and it was supposed to be "PD0 = 0x0FF". </s><s n="s2.2;p10.17">Therefore this had to be changed. </s></p><p n="p11.17"><s n="s1.2;p11.17">A new 'if' function had to be added to the while loop to decrease the count when the SW 2 was pressed. </s><s n="s2.2;p11.17">This function was the same as the function that does the increasing count but the specific codes for the switches and a few other codes had to be changed to achieve the required action. </s></p><p n="p12.17"><s n="s1.1;p12.17">When displaying these counts on the LED displays both the displays had to be selected and deselected and count function had to be changed from '%' to '/' for the decreasing count. </s></p></div2></div1><div1 type="section"><head rend="bold">Basic Hardware Configuration</head><p n="p13.17"><s n="s1.1;p13.17">The M16 development board contains circuit components such as 3 switches (SW 1-3) and a 4 <hi rend="sup">th</hi> switch for reset purpose, a 9-way serial port for communication with the computer, crystals for clocking purposes, a 96-way communication port for the microcontroller, two seven segment LED displays etc. </s></p><list type="bulleted"><head>List of hardware available in the development board:</head><item>4 Push-to-make switches SW1-4; SW1-3 provides digital inputs and SW4 provides Reset function.</item><item>2 x 7-segment display devices; LED1-2.</item><item>Potentiometer R24/VR1; provides variable (0-5V) dc input to ADCO.</item><item>9-way IDE connector CN1 for serial communication with a PC.</item><item>96-way connector CN4 to I/O pins of microcontroller.</item><item>Dc power input connectors; CN3(5V), CN2(8-12V).</item><item>Various configuration jumpers.</item><item>16MHz &amp; 32.768KHz crystals for the main and sub- clock circuits respectively.</item></list><p n="p14.17"><s n="s1.2;p14.17">There are two seven segment displays which are both connected to P 0 input/output port. </s><s n="s2.2;p14.17">P 0 is a 8-bit input/output port and the direction of the port is configured by PD 0(8-bit register) so each bit can be individually set to input or output. </s></p><p n="p15.17"><s n="s1.2;p15.17">The 8 pins in the port map on to the 7 segment display and the decimal point according to the table below. </s><s n="s2.2;p15.17">These pins first go through a buffer IC to power the LEDs on the display. </s></p><table id="BAWE_0356a-tab.001"><row><cell/></row></table><figure id="BAWE_0356a-pic.001"/></div1><div1 type="section"><head rend="bold">Completed, Modified and commented C program code- (Assl3i.c)</head><quote lang="English">#define Chip_3062x #include "stdio.h" #include "iom16c62.h"<hi rend="bold"> Unsigned</hi> char dis_code [10] = { 0x0C0, 0x0A4, 0x0B0, 0x99, 0x92, 0x82, 0XF8, 0x80, 0x98 }, /* this defines an array with hexadecimals to display the results on the LED display*/ Count; /* initialises the variable 'count' */<hi rend="bold"> Void</hi> wait (<hi rend="bold">unsigned int</hi> delay) { While (delay !=0) /* while delay is not equal to zero the the value of delay is decreased */ Delay--; } <hi rend="bold">Void</hi> main (<hi rend="bold">void</hi>) /* no values are returned*/ { PD0 = 0x0FF; /* set all port 0 bits to output*/ PD1.0 = 1; /* this controls LED 1 and sets P1.0 to output*/ PD1.1 = 1; /*this controls LED 2 and sets P1.1 to output*/ PD8.2 = 0; /* port 8 bit 2 to input and controls SW1*/ PD8.3 = 0; /* port 8 bit 3 to input and controls SW 2*/ P0 = 0x0FF; /* port 0 to output*/ P1.0 = 1; /* LED 1 switched off*/ P1.1 = 1; /* LED 2 switched off*/ While (1) /* an infinite loop as long as the condition is true*/ { If (P8.2 == 0) { Wait (10000); /* passing time to display results on LEDs*/ If (P8.2 == 0) { ++count % 100; /* increase the value of count*/ While (P8.2 == 0); /* a loop while port 8 bit 2 is zero*/ Wait (10000); } } { If (P8.3 == 0) { Wait (10000); If (P8.3 == 0) { - - count % 100; /* decrease the value of count*/ While (P8.3 == 0); /* a loop while port 8 bit 3 is equal to zero*/ Wait (10000); } } P0 = dis_code [count % 10]; /* display 'units' in LED 2 from 0 to 9*/ P1.1 = 0; /* turn on LED 2*/ P1.1 = 1; /* turn off LED 2*/ P0 = dis_code [count / 10]; /* display 'tens' in LED 1 from 0 to 9*/ P1.0 = 0; /* turn on LED 1*/ P1.0 = 1; /*turn off LED 2*/ } }</quote><p n="p16.17"/></div1><div1 type="section"><head rend="bold">Conclusion</head><p n="p17.17"><s n="s1.2;p17.17">The lab was challenging in the very beginning when the code had to be modified to display the tens and units in the two LEDs, but the goals were achieved after a few changes. </s><s n="s2.2;p17.17">The lab improved my knowledge of the coding and actual working of the M16 development board. </s></p></div1></body><back/></text></TEI.2>
